<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="未登录首页"/>
    <meta name="author" content="cc"/>
    <title>中国医学影像共享服务平台</title>

    <!-- CSS -->
    <!-- Bootstrap core CSS -->
    <link th:href="@{css/bootstrap.min.css}" rel="stylesheet" />


    <!-- Custom styles for this template -->
    <link th:href="@{css/navbar-fixed-top.css}" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->


    <!-- Favicon and touch icons -->
    <script>
        function upload() {
            window.location.href = '/uploadcase';
        }
        function tobedone() {
            window.location.href = '/tobedone';

        }

    </script>
    <style type="text/css">
        body {
            height: 100%;
            background-color: #26292d;
        }
        dt{
            color: #ffbf5b;
            font-size:16px;
            font-weight: bold;
            margin-bottom: 10px;
            }
        dd{
            color: bisque;
        }
        #midcontainer{
            background: #404040;
        }
        .panel-heading{
            color: #ffffff!important;
            background-color: #404040!important;
            border-color: #404040!important;
        }
        .panel-body{
            /*border-top-color: #4b4e52;*/
            color:#66ccff;
            border-top: 1px solid #8e8e8e!important;
            background-color:#404040!important;
        }
        li a{
            color: #ffbf55;
            text-decoration: none;
        }
        li a:hover{
            color:#ffffff
        }
        li a:focus{
            color: #ffbf55;
            text-decoration: none;
        }
        .panel-default{
            border-color:#525252;
            background-color: #525252;
        }
        .panel-title:hover{
            color:inherit
        }
        .panel-title:focus{
            color:inherit
        }
        .breadcrumb{
            background-color: inherit;
        }
          .line {
              height:1px;
              width:100%;
              background:#777777;
              overflow:hidden;
              margin-top: 20px;
              margin-bottom: 20px;
          }

    </style>
</head>

<body>

<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/home">中国医学影像共享服务平台</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
         <!--   <form class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="征象"/>
                </div>
                <button type="button" class="btn btn-default">搜索</button>

            </form>  -->
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a th:if="${type==1}" href="#"  class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">病例管理<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/myupload">我的上传</a></li>
                        <li><a href="/mysave">我的保存</a></li>
                        <li><a href="/mychecked">我的审核</a></li>
                        <li id="ul2"><a href="/mymodify">我的退修</a></li>

                    </ul>
                </li>

                        <li><a href="/logout">退出</a></li>

                <button th:if="${type==1}" class="btn btn-danger navbar-btn" type="button" onclick="upload()">  上传 </button>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<div class="container" style="margin-left:300px">

    <!-- Main component for a primary marketing message or call to action -->

    <div class="row clearfix">
        <div class="col-md-6 column">
            <ul class="breadcrumb">
                <li>
                    <a  th:href="@{/second(id=${id})}">
                        总论</a>
                </li>

                <li>
                    <a  th:href="@{/third(id=${id},secondlevel=${secondlevel})}">
                        靶征
                    </a>
                </li>
                <li th:text="${disease}" class="active">
                    征象
                </li>

            </ul>
        </div>
     <!--   <div class="col-md-5 column" >

            <a href=""><span class="label label-primary">收藏征象</span> </a>
        </div>

        <div class="col-md-1 column" >

           <a href="#" onclick="javascript:history.go(-1);"><span class="label label-success">后退</span> </a>
        </div>     -->

    </div>
    <div class="row clearfix">
        <div class="col-md-2 column">
            <div class="panel-group" id="panel-20144">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a class="panel-title" data-toggle="collapse" data-parent="#panel-20144" href="#panel-element-162746">基本信息</a>
                    </div>
                    <div id="panel-element-162746" class="panel-collapse in">
                        <div class="panel-body">
                            <ul>
                                <li><a href="#" name="name">征象名</a></li>
                                <li><a href="#ename" name="ename">英文名</a></li>
                                <li><a href="#sys" name="sys">所属系统</a></li>
                                <li><a href="#def" name="def">定义</a></li>
                            </ul>
                        </div>
                    </div>

                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a class="panel-title collapsed" data-toggle="collapse" data-parent="#panel-20144" href="#panel-element-886149">常见疾病</a>
                    </div>
                    <div id="panel-element-886149" class="panel-collapse collapse">
                        <div class="panel-body">
                            <ul>
                                <li><a href="#com" name="com">常见疾病</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a class="panel-title collapsed" data-toggle="collapse" data-parent="#panel-20144" href="#panel-element-886150">影像学特点</a>
                    </div>
                    <div id="panel-element-886150" class="panel-collapse collapse">
                        <div class="panel-body">
                        <ul>
                            <li><a href="#fea" name="fea">影像学特点</a></li>
                        </ul>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a class="panel-title collapsed" data-toggle="collapse" data-parent="#panel-20144" href="#panel-element-886151">上传人/时间</a>
                    </div>
                    <div id="panel-element-886151" class="panel-collapse collapse">
                        <div class="panel-body">
                        <ul>
                            <li><a href="#person" name="person">上传人</a></li>
                            <li><a href="#time" name="time">上传时间</a></li>
                            <li><a href="#ltime" name="ltime">最后上传时间</a></li>
                        </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 column" id="midcontainer" style="padding: 20px" >


            <dt>
                [征象名]
            </dt>
            <dd>
                靶征
            </dd>
            <div class="line" id="ename"></div>

            <dt>[英文名]</dt>
            <dd>
                target pattern
            </dd>
            <div class="line" id="sys"></div>

            <dt>
                [所属系统]
            </dt>
            <dd>
                总论
            </dd>

            <div class="line" id="def"></div>

            <dt>
                [定义]
            </dt>
            <dd>
                颅脑增强CT扫描，伴有中央点状钙化或点状强化的脑内环形强化病灶，称为“靶征”。靶征是脑内成熟结核球在增强CT上的表现，其中伴有中央点状钙化的病灶，具有特征性。
            </dd>
            <div class="line" id="com"></div>

            <dt>[常见疾病]</dt>
            <dd>
                肝转移癌
            </dd>
            <div class="line" id="fea"></div>

            <dt>[影像学特点]</dt>
            <dd>
                组织学上，环状强化带对应于含有炎性细胞的纤维包膜，无强化区对应于干酪样坏死物，中央点状强化的机制未明。
            </dd>
            <div class="line" id="person"></div>

            <dt>
                [上传人]
            </dt>
            <dd>
                luckycc
            </dd>
            <div class="line" id="time"></div>


            <dt>
                [上传时间]
            </dt>
            <dd>
               2018/10/16
            </dd>
            <div class="line" id="ltime"></div>

            <dt>[最近更新时间]</dt>
            <dd>
                2018/10/16
            </dd>

        </div>
     <!--   <div class="col-md-4 column">

            <div id="dicomImageWrapper" style="width:360px;height:360px;position:relative;color: white;"
                 class="cornerstone-enabled-image"
                 oncontextmenu="return false"
                 unselectable='on'
                 onselectstart='return false;'
                 onmousedown='return false;'>
                <div id="dicomImage" oncontextmenu="return false"
                     style="width:360px;height:360px;top:0px;left:0px; position:absolute">
                </div>
                <div id="topleft" style="position: absolute;top:0px; left:0px">
                    Patient Name
                </div>
                <div id="topright" style="position: absolute;top:0px; right:0px">
                    Render Time:
                </div>
                <div id="bottomright" style="position: absolute;bottom:0px; right:0px">
                    Zoom:
                </div>
                <div id="bottomleft" style="position: absolute;bottom:0px; left:0px">
                    WW/WC:
                </div>

            </div>
            <div><span id="coords"></span></div>

            <div class="carousel slide" id="carousel-466973">
                <ol class="carousel-indicators">
                    <li class="active" data-slide-to="0" data-target="#carousel-466973">
                    </li>
                    <li data-slide-to="1" data-target="#carousel-466973">
                    </li>
                    <li data-slide-to="2" data-target="#carousel-466973">
                    </li>
                </ol>
                <div class="carousel-inner">


                    <div class="item active">

                        <img alt="" th:src="${img0.path}" />
                        <div class="carousel-caption">
                        </div>
                    </div>
                    <div class="item">
                        <img alt="" th:src="${img1.path}" />
                        <div class="carousel-caption">

                        </div>
                    </div>
                    <div class="item">
                        <img alt="" th:src="${img2.path}" />
                        <div class="carousel-caption">

                        </div>
                    </div>

                </div> <a class="left carousel-control" href="#carousel-466973" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" href="#carousel-466973" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
            </div>
            <dl>
                <dt>
                    影像学表现
                </dt>
                <dd th:text="${thecasea.CT_symptom}">
                    影像学表现影像学表现影像学表现影像学表现影像学表现影像学表现影像学表现
                </dd>

            </dl>
        </div>-->
    </div>

    <!-- /container -->
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script th:src="@{/js/jquery.js}" type="text/javascript"></script>
<script th:src="@{/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/js/bootstrap-table.js}" type="text/javascript"></script>
</body>
<script src="/js/cornerstone.js" type="text/javascript"></script>

<!-- include special code for these examples which provides images -->
<script src="/js/exampleImageIdLoader.js" type="text/javascript" ></script>

<script type="text/javascript">
    $(document).ready(function() {

        var imageIds = [
            'example://1',
            'example://2'];
        var currentImageIndex = 0;


        // updates the image display
        function updateTheImage(imageIndex) {
            return cornerstone.loadAndCacheImage(imageIds[imageIndex]).then(function(image) {
                currentImageIndex = imageIndex;
                var viewport = cornerstone.getViewport(element);
                cornerstone.displayImage(element, image, viewport);
            });
        }

        // image enable the element
        var element = $('#dicomImage').get(0);
        cornerstone.enable(element);

        // set event handlers
        function onImageRendered(e, eventData) {
            $('#topright').text("Render Time:" + eventData.renderTimeInMs + " ms");
        }
        $(element).on("CornerstoneImageRendered", onImageRendered);

        // setup handlers before we display the image
        function onImageRendered(e, eventData) {
            // set the canvas context to the image coordinate system
            cornerstone.setToPixelCoordinateSystem(eventData.enabledElement, eventData.canvasContext);

            // NOTE: The coordinate system of the canvas is in image pixel space.  Drawing
            // to location 0,0 will be the top left of the image and rows,columns is the bottom
            // right.
            var context = eventData.canvasContext;
            context.beginPath();
            context.strokeStyle = 'white';
            context.lineWidth = .5;
            context.rect(128, 90, 50, 60);
            context.stroke();
            context.fillStyle = "white";
            context.font = "6px Arial";
            context.fillText("Tumor Here", 128, 85);

            $('#topright').text("Render Time:" + eventData.renderTimeInMs + " ms");
            $('#bottomleft').text("WW/WL:" + Math.round(eventData.viewport.voi.windowWidth) + "/" + Math.round(eventData.viewport.voi.windowCenter));
            $('#bottomright').text("Zoom:" + eventData.viewport.scale.toFixed(2));

        }
        $(element).on("CornerstoneImageRendered", onImageRendered);

        // load and display the image
        var imagePromise = updateTheImage(0);

        // add handlers for mouse events once the image is loaded.
        imagePromise.then(function() {
            viewport = cornerstone.getViewport(element);
            $('#bottomright').text("Zoom: " + viewport.scale.toFixed(2) + "x");
            $('#bottomleft').text("WW/WC:" + Math.round(viewport.voi.windowWidth) + "/" + Math.round(viewport.voi.windowCenter));

            // add event handlers to pan image on mouse move
            $('#dicomImage').mousedown(function (e) {
                var lastX = e.pageX;
                var lastY = e.pageY;

                var mouseButton = e.which;

                $(document).mousemove(function (e) {
                    var deltaX = e.pageX - lastX,
                        deltaY = e.pageY - lastY;
                    lastX = e.pageX;
                    lastY = e.pageY;

                    if (mouseButton == 1) {
                        var viewport = cornerstone.getViewport(element);
                        viewport.voi.windowWidth += (deltaX / viewport.scale);
                        viewport.voi.windowCenter += (deltaY / viewport.scale);
                        cornerstone.setViewport(element, viewport);
                        $('#bottomleft').text("WW/WL:" + Math.round(viewport.voi.windowWidth) + "/" + Math.round(viewport.voi.windowCenter));
                    }
                    else if (mouseButton == 2) {
                        var viewport = cornerstone.getViewport(element);
                        viewport.translation.x += (deltaX / viewport.scale);
                        viewport.translation.y += (deltaY / viewport.scale);
                        cornerstone.setViewport(element, viewport);
                    }
                    else if (mouseButton == 3) {
                        var viewport = cornerstone.getViewport(element);
                        viewport.scale += (deltaY / 100);
                        cornerstone.setViewport(element, viewport);
                        $('#bottomright').text("Zoom: " + viewport.scale.toFixed(2) + "x");
                    }
                });

                $(document).mouseup(function (e) {
                    $(document).unbind('mousemove');
                    $(document).unbind('mouseup');
                });
            });

            $('#dicomImage').on('mousewheel DOMMouseScroll', function (e) {

                // Firefox e.originalEvent.detail  0 scroll back, 0 scroll forward
                // chrome/safari e.originalEvent.wheelDelta 0 scroll back, 0 scroll forward
                if (currentImageIndex == 0) {
                    updateTheImage(1);
                }
//                }
                else {
                    if (currentImageIndex == 1) {
                        updateTheImage(0);
                    }
                }
                //prevent page fom scrolling
                return false;
            });

            // Add event handler to the ww/wc apply button
            $('#x256').click(function (e) {
                $('#dicomImage').width(256).height(256);
                $('#dicomImageWrapper').width(256).height(256);
                cornerstone.resize(element);
            });

            $('#x512').click(function (e) {
                $('#dicomImage').width(512).height(512);
                $('#dicomImageWrapper').width(512).height(512);
                cornerstone.resize(element);
            });

            $('#invert').click(function (e) {
                var viewport = cornerstone.getViewport(element);
                if (viewport.invert === true) {
                    viewport.invert = false;
                } else {
                    viewport.invert = true;
                }
                cornerstone.setViewport(element, viewport);
            });

            $('#interpolation').click(function (e) {
                var viewport = cornerstone.getViewport(element);
                if (viewport.pixelReplication === true) {
                    viewport.pixelReplication = false;
                } else {
                    viewport.pixelReplication = true;
                }
                cornerstone.setViewport(element, viewport);
            });
            $('#hflip').click(function (e) {
                var viewport = cornerstone.getViewport(element);
                viewport.hflip = !viewport.hflip;
                cornerstone.setViewport(element, viewport);
            });
            $('#vflip').click(function (e) {
                var viewport = cornerstone.getViewport(element);
                viewport.vflip = !viewport.vflip;
                cornerstone.setViewport(element, viewport);
            });
            $('#rotate').click(function (e) {
                var viewport = cornerstone.getViewport(element);
                viewport.rotation+=90;
                cornerstone.setViewport(element, viewport);
            });
            $(element).mousemove(function(event)
            {
                var pixelCoords = cornerstone.pageToPixel(element, event.pageX, event.pageY);
                var x = event.pageX;
                var y = event.pageY;
                $('#coords').text("pageX=" + event.pageX + ", pageY=" + event.pageY + ", pixelX=" + pixelCoords.x + ", pixelY=" + pixelCoords.y);
            });
        });



    });

</script>
</html>